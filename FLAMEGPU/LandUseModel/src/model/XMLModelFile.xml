<?xml version="1.0" encoding="utf-8"?>
<gpu:xmodel xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU" xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
  <name>LandUseModel</name>
  <gpu:environment>
    <gpu:functionFiles>
      <file>functions.c</file>
    </gpu:functionFiles>
  </gpu:environment>
  <xagents>
		<gpu:xagent>
				<name>landcell</name>
				<memory>
								<gpu:variable>
												<type>int</type>
												<name>parcel_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>x</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>y</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>landuse</name>
								</gpu:variable>
				</memory>
				<functions>
								<gpu:function>
												<name>change_landuse</name>
												<currentState>land</currentState>
												<nextState>land</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>true</gpu:RNG>
								</gpu:function>
				</functions>
				<states>
								<gpu:state>
												<name>land</name>
								</gpu:state>
								<initialState>land</initialState>
				</states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>1024</gpu:bufferSize>
		</gpu:xagent>
		<gpu:xagent>
				<name>urbanbiz</name>
				<memory>
								<gpu:variable>
												<type>int</type>
												<name>biz_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>parcel_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>is_hiring</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>max_employee_count</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>current_employee_count</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>rent</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>time</name>
								</gpu:variable>
				</memory>
				<functions>
								<gpu:function>
												<name>startup</name>
												<currentState>start</currentState>
												<nextState>working</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
								<gpu:function>
												<name>work</name>
												<currentState>working</currentState>
												<nextState>working</nextState>
												<outputs>
																<gpu:output>
																				<messageName>payment</messageName>
																				<gpu:type>single_message</gpu:type>
																</gpu:output>
												</outputs>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>true</gpu:RNG>
								</gpu:function>
								<gpu:function>
												<name>bankrupt</name>
												<currentState>working</currentState>
												<nextState>start</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
				</functions>
				<states>
								<gpu:state>
												<name>start</name>
								</gpu:state>
								<gpu:state>
												<name>working</name>
								</gpu:state>
								<initialState>start</initialState>
				</states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>1024</gpu:bufferSize>
		</gpu:xagent>
		<gpu:xagent>
				<name>urbanres</name>
				<memory>
								<gpu:variable>
												<type>int</type>
												<name>res_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>employer_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>parcel_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>clock</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>dissatisfied_clock</name>
								</gpu:variable>
								<gpu:variable>
												<type>float</type>
												<name>money</name>
								</gpu:variable>
				</memory>
				<functions>
								<gpu:function>
												<name>buyin</name>
												<currentState>res</currentState>
												<nextState>happy</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
								<gpu:function>
												<name>happy_wait</name>
												<currentState>happy</currentState>
												<nextState>happy</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
								<gpu:function>
												<name>wait</name>
												<currentState>unhappy</currentState>
												<nextState>unhappy</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
								<gpu:function>
												<name>sellout</name>
												<currentState>unhappy</currentState>
												<nextState>res</nextState>
												<gpu:reallocate>false</gpu:reallocate>
												<gpu:RNG>false</gpu:RNG>
								</gpu:function>
				</functions>
				<states>
								<gpu:state>
												<name>happy</name>
								</gpu:state>
								<gpu:state>
												<name>unhappy</name>
								</gpu:state>
								<gpu:state>
												<name>res</name>
								</gpu:state>
								<initialState>res</initialState>
				</states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>1024</gpu:bufferSize>
		</gpu:xagent>
		<gpu:xagent>
				<name>agagent</name>
				<memory>
								<gpu:variable>
												<type>int</type>
												<name>farm_id</name>
								</gpu:variable>
								<gpu:variable>
												<type>int</type>
												<name>parcel_id</name>
								</gpu:variable>
				</memory>
				<states>
								<gpu:state>
												<name>farm</name>
								</gpu:state>
								<gpu:state>
												<name>good</name>
								</gpu:state>
								<gpu:state>
												<name>minor_stress</name>
								</gpu:state>
								<gpu:state>
												<name>major_stress</name>
								</gpu:state>
								<initialState>farm</initialState>
				</states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>1024</gpu:bufferSize>
		</gpu:xagent>
  </xagents>
  <messages>
					<gpu:message>
									<name>payment</name>
									<variables>
													<gpu:variable>
																	<type>float</type>
																	<name>amount</name>
													</gpu:variable>
													<gpu:variable>
																	<type>int</type>
																	<name>employer_id</name>
													</gpu:variable>
									</variables>
									<gpu:partitioningNone/>
									<gpu:bufferSize>1024</gpu:bufferSize>
								</gpu:message>
  </messages>
  <layers>
    <layer>
      <gpu:layerFunction>
        <name>work</name>
      </gpu:layerFunction>
    </layer>
		<layer>
						<gpu:layerFunction>
										<name>happy_wait</name>
						</gpu:layerFunction>
						<gpu:layerFunction>
										<name>wait</name>
						</gpu:layerFunction>
		</layer>
    <layer>
      <gpu:layerFunction>
        <name>change_landuse</name>
      </gpu:layerFunction>
    </layer>
  </layers>
</gpu:xmodel>
